<app-card>
    <a class="parentPage">{{parentPage}}</a>
    <strong class="currentPage">{{currentPage}}</strong>
</app-card>
<div class="row">
    <div class="col-lg-12">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <!-- <h5>{{currentPage}}</h5> -->
                <div style="margin:0 auto;margin-bottom:5px; text-align: right">
                    <button class="btn btn-danger" (click)="exportCSV(dt)">
                        <i class="fa fa-file-excel-o"></i>
                    </button>
                    <button class="btn btn-success" (click)="refresh()">
                        <i class="fa fa-refresh"></i>
                    </button>
                </div>
            </div>
            <div class="ibox-content">
                <div class="row">
                    <div class="col-sm-2">
                        <label>&nbsp;</label>
                        <div class="input-group">
                            <input #txtShipment type="text" placeholder="Mã vận đơn ..." class="input-sm form-control" [(ngModel)]="txtShipmentNumber"
                                (keyup)="changeShipment(txtShipment)" />
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <label>Ngày tạo vận đơn</label>
                            <div class="input-group" daterangepicker (selected)="selectedDate($event, mainInput)" (cancelDaterangepicker)="calendarEventsHandler($event)"
                                (showDaterangepicker)="calendarEventsHandler($event)">
                                <span class="form-control uneditable-input" name="daterange" style="height: 25px;">
                                    <p style="margin-top: -3px">{{ mainInput.start | dateFormatNoTime }} - {{ mainInput.end | dateFormatNoTime }}</p>
                                </span>
                                <span class="input-group-btn">
                                    <a type="button" class="btn btn-default">
                                        <i class="glyphicon glyphicon-calendar"></i>
                                    </a>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div class="form-group">
                            <label>Tỉnh đi</label>
                            <p-dropdown styleClass="select-input form-control" [options]="fromProvinces" [(ngModel)]="fromSelectedProvince" [style]="{'width':'100%'}"
                                filter="filter" (onChange)="changeFromProvince()" autofocus tabindex="1">
                            </p-dropdown>
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div class="form-group">
                            <label>Tỉnh đến</label>
                            <p-dropdown styleClass="select-input form-control" [options]="toProvinces" [(ngModel)]="toSelectedProvince" [style]="{'width':'100%'}"
                                filter="filter" (onChange)="changeToProvince()" autofocus tabindex="1">
                            </p-dropdown>
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div class="form-group">
                            <label>Người gửi</label>
                            <p-dropdown styleClass="select-input form-control" [options]="fromSenders" [(ngModel)]="fromSelectedSender" [style]="{'width':'100%'}"
                                filter="filter" (onChange)="changeSender()" autofocus tabindex="1">
                            </p-dropdown>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-2">
                        <div class="form-group">
                            <label>Từ {{unit}}</label>
                            <!-- <p-dropdown styleClass="select-input form-control" [options]="customers" [(ngModel)]="selectedCustomer" [style]="{'width':'100%'}"
                                filter="filter" (onChange)="changeCustomer()" autofocus tabindex="1">
                            </p-dropdown> -->
                            <div>
                                <input type="number" #fromWeight name="fromWeight" styleClass="select-input form-control" placeholder="0" step="50" min="0"
                                    (click)="changeFromWeight(fromWeight.value)" (keyup)="changeFromWeight(fromWeight.value)" [(ngModel)]="txtFromWeight">
                            </div>

                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div class="form-group">
                            <label>Đến {{unit}}</label>
                            <!-- <p-dropdown styleClass="select-input form-control" [options]="customers" [(ngModel)]="selectedCustomer" [style]="{'width':'100%'}"
                                filter="filter" (onChange)="changeCustomer()" autofocus tabindex="1">
                            </p-dropdown> -->
                            <div>
                                <input type="number" #toWeight name="toWeight" styleClass="select-input form-control" placeholder="0" step="50" min="0" (click)="changeToWeight(toWeight.value)"
                                    (keyup)="changeToWeight(toWeight.value)" [(ngModel)]="txtToWeight">
                            </div>

                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div class="form-group">
                            <label>Chọn Dịch Vụ</label>
                            <p-dropdown styleClass="select-input form-control" [options]="services" [(ngModel)]="selectedServices" [style]="{'width':'100%'}"
                                filter="filter" (onChange)="changeServices()" autofocus tabindex="1">
                            </p-dropdown>
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div class="form-group">
                            <label>Chọn Thanh Toán</label>
                            <p-dropdown styleClass="select-input form-control" [options]="paymentTypes" [(ngModel)]="selectedPaymentType" [style]="{'width':'100%'}"
                                filter="filter" (onChange)="changePaymentType()" autofocus tabindex="1">
                            </p-dropdown>
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div class="form-group">
                            <label>Chọn Trạng Thái</label>
                            <p-dropdown styleClass="select-input form-control" [options]="statuses" [(ngModel)]="selectedStatus" [style]="{'width':'100%'}"
                                filter="filter" (onChange)="changeShipmentStatus()" autofocus tabindex="1">
                            </p-dropdown>
                        </div>
                    </div>
                    <div class="col-sm-2" style="float: right">
                        <div class="form-group">
                            <label>&nbsp;</label>
                            <div class="">
                                <!-- <input #filterGb type="text" placeholder="Nhập chuỗi cần tìm ..." [(ngModel)]="txtFilterGb" class="input-sm form-control"
                                    id="filter" /> -->
                                <input type="text" placeholder="Nhập chuỗi cần tìm ..." (keyup.enter)="search($event.target.value)" class="input-sm form-control"
                                    id="filter" />
                                <!-- <span class="input-group-btn">
                                <button type="button" class="btn btn-sm btn-primary"> Tìm kiếm</button>
                            </span> -->
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <label>&nbsp;</label>
                        <div class="div-flex">
                            <div>
                                <p-checkbox [(ngModel)]="reviewChecked" binary="true" (onChange)="onChangeReview()"></p-checkbox>
                            </div>
                            <div>
                                <label> DS đã chọn (
                                    <strong>{{(selectedData) ? (selectedData.length) : 0}}</strong> vđ)</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="ibox-content">
                <div style="float: right;">
                    <div class="view-shipment">
                        Xem:
                    </div>
                    <div class="select-ic-shipment">
                        <span>
                            <i class="fa fa-th-list list" [style.color]="colorList" (click)="showListTable()"></i>
                        </span>
                        <span>
                            <i class="fa fa-th-large list" [style.color]="colorGrib" (click)="showGribTable()"></i>
                        </span>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-1">
                        <a class="btn btn-info" (click)="multiPrintShipment()">
                            <i class="fa fa-print"></i> In Vđ</a>
                    </div>
                    <div class="col-sm-3 no-padding">
                        <a class="btn btn-info" style="margin-right: 15px;" (click)="multiPrintCodeA4()">
                            <i class="fa fa-print"></i> In Code A4</a>
                        <a class="btn btn-info" (click)="multiPrintCodeSticker()">
                            <i class="fa fa-print"></i> In máy barcode</a>
                    </div>
                    <div class="col-sm-8"></div>
                </div>

                <div class="row" [hidden]="isListTable">
                    <div class="col-sm-12">
                        <div class="table-responsive">
                            <!-- <p-dataTable [value]="listData" [paginator]="true" rows="10" [responsive]="true" [rowsPerPageOptions]="[10,20,50,100]" [globalFilter]="filterGb"
                                [lazy]="true" [totalRecords]="totalRecords" (onLazyLoad)="loadLazy($event)" [(first)]="first"
                                [(selection)]="selectedData">
                                <p-column [style]="{'width':'10px','padding-right':'0.2em'}" selectionMode="multiple"></p-column>
                                <p-column styleClass="p-col-normal" field="shipmentNumber">
                                    <ng-template pTemplate="header">
                                        <span class="ui-column-title" style="font-weight: bold;">Thông tin vận đơn</span>
                                    </ng-template>
                                    <ng-template let-col let-data="rowData" pTemplate="body">
                                        <div class="ui-grid ui-grid-responsive ui-grid-pad">
                                            <div style="display: flex" class="ui-grid-row">
                                                <div class="ui-grid-col-5">
                                                    Mã vận đơn
                                                </div>
                                                <div class="ui-grid-col-7">
                                                    {{data.shipmentNumber}}
                                                </div>
                                            </div>
                                            <div style="display: flex" class="ui-grid-row">
                                                <div class="ui-grid-col-5">
                                                    Mã bill tổng
                                                </div>
                                                <div class="ui-grid-col-7">
                                                    {{data.requestShipmentId}}
                                                </div>
                                            </div>
                                            <div style="display: flex" class="ui-grid-row">
                                                <div class="ui-grid-col-5">
                                                    Ngày gửi
                                                </div>
                                                <div class="ui-grid-col-7">
                                                    {{data.orderDate | dateFormat}}
                                                </div>
                                            </div>
                                            <div style="display: flex" class="ui-grid-row">
                                                <div class="ui-grid-col-5">
                                                    Dịch vụ
                                                </div>
                                                <div *ngIf="data.service" class="ui-grid-col-7">
                                                    {{data.service.name}}
                                                </div>
                                            </div>
                                            <div style="display: flex" class="ui-grid-row">
                                                <div class="ui-grid-col-5">
                                                    Trạng thái
                                                </div>
                                                <div *ngIf="data.shipmentStatus" class="ui-grid-col-7">
                                                    {{data.shipmentStatus.name}}
                                                </div>
                                            </div>
                                            <div style="display: flex" class="ui-grid-row">
                                                <div class="ui-grid-col-5">
                                                    Nhân viên gửi
                                                </div>
                                                <div *ngIf="data.deliverUser" class="ui-grid-col-7">
                                                    {{data.deliverUser.fullName}}
                                                </div>
                                            </div>
                                            <div style="display: flex" class="ui-grid-row">
                                                <div class="ui-grid-col-5">
                                                    Tùy chọn
                                                </div>
                                                <div class="ui-grid-col-7">
                                                    <div style="display: flex; justify-content: space-between">
                                                        <button #detailShipmentTemplate class="btn btn-success" [(ngModel)]="data.shipmentNumber" (click)="onDetailShipment(detailShipmentTemplate, data)"
                                                            *ngIf="data.shipmentStatusId" ngDefaultControl>
                                                            <i class="fa fa-eye"></i>Xem</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="ui-grid-col-5">
                                                &nbsp;
                                            </div>
                                            <div class="ui-grid-col-7">
                                                &nbsp;
                                            </div>
                                        </div>
                                    </ng-template>
                                </p-column>
                                <p-column styleClass="p-col-normal" field="senderName">
                                    <ng-template pTemplate="header">
                                        <span class="ui-column-title" style="font-weight: bold;">Thông tin người gửi</span>
                                    </ng-template>
                                    <ng-template let-data="rowData" pTemplate="body">
                                        <div class="ui-grid ui-grid-responsive ui-grid-pad">
                                            <div style="display: flex" class="ui-grid-row">
                                                <div class="ui-grid-col-3">
                                                    Tên
                                                </div>
                                                <div class="ui-grid-col-9">
                                                    {{data.senderName}}
                                                </div>
                                            </div>
                                            <div style="display: flex" class="ui-grid-row">
                                                <div class="ui-grid-col-3">
                                                    Điện thoại
                                                </div>
                                                <div class="ui-grid-col-9">
                                                    <i class="fa fa-phone"></i>
                                                    {{data.senderPhone}}
                                                </div>
                                            </div>
                                            <div style="display: flex" class="ui-grid-row">
                                                <div class="ui-grid-col-3">
                                                    CTY
                                                </div>
                                                <div class="ui-grid-col-9">
                                                    <i class="fa fa-home"></i>
                                                    {{data.companyFrom}}
                                                </div>
                                            </div>
                                            <div style="display: flex" class="ui-grid-row">
                                                <div class="ui-grid-col-3">
                                                    Địa chỉ
                                                </div>
                                                <div class="ui-grid-col-9">
                                                    <i class="fa fa-map-marker"></i>
                                                    {{data.pickingAddress}}
                                                </div>
                                            </div>
                                            <div style="display: flex" class="ui-grid-row">
                                                <div class="ui-grid-col-3">
                                                    Tỉnh đi
                                                </div>
                                                <div *ngIf="data.fromWard" class="ui-grid-col-9">
                                                    {{data.fromWard.district.province.name}}
                                                </div>
                                            </div>
                                            <div style="display: flex" class="ui-grid-row">
                                                <div class="ui-grid-col-3">
                                                    Trạm lấy
                                                </div>
                                                <div *ngIf="data.fromHub" class="ui-grid-col-9">
                                                    {{data.fromHub.name}}
                                                </div>
                                            </div>
                                            <div style="display: flex" class="ui-grid-row">
                                                <div class="ui-grid-col-3">
                                                    Tuyến lấy
                                                </div>
                                                <div *ngIf="data.fromHubRouting" class="ui-grid-col-9">
                                                    {{data.fromHubRouting.name}}
                                                </div>
                                            </div>
                                        </div>
                                    </ng-template>
                                    <ng-template pTemplate="footer">
                                        <span class="ui-column-title" style="font-weight: bold;">Tổng: {{dt.totalRecords}} vận đơn</span>
                                    </ng-template>
                                </p-column>
                                <p-column styleClass="p-col-normal" field="receiverName">
                                    <ng-template pTemplate="header">
                                        <span class="ui-column-title" style="font-weight: bold;">Thông tin người nhận</span>
                                    </ng-template>
                                    <ng-template let-data="rowData" pTemplate="body">
                                        <div class="ui-grid ui-grid-responsive ui-grid-pad">
                                            <div style="display: flex" class="ui-grid-row">
                                                <div class="ui-grid-col-3">
                                                    Tên
                                                </div>
                                                <div class="ui-grid-col-9">
                                                    {{data.receiverName}}
                                                </div>
                                            </div>
                                            <div style="display: flex" class="ui-grid-row">
                                                <div class="ui-grid-col-3">
                                                    Điện thoại
                                                </div>
                                                <div class="ui-grid-col-9">
                                                    <i class="fa fa-phone"></i>
                                                    {{data.receiverPhone}}
                                                </div>
                                            </div>
                                            <div style="display: flex" class="ui-grid-row">
                                                <div class="ui-grid-col-3">
                                                    CTY
                                                </div>
                                                <div class="ui-grid-col-9">
                                                    <i class="fa fa-home"></i>
                                                    {{data.companyTo}}
                                                </div>
                                            </div>
                                            <div style="display: flex" class="ui-grid-row">
                                                <div class="ui-grid-col-3">
                                                    Địa chỉ
                                                </div>
                                                <div class="ui-grid-col-9">
                                                    <i class="fa fa-map-marker"></i>
                                                    {{data.shippingAddress}}
                                                </div>
                                            </div>
                                            <div style="display: flex" class="ui-grid-row">
                                                <div class="ui-grid-col-3">
                                                    Tỉnh đến
                                                </div>
                                                <div *ngIf="data.toWard" class="ui-grid-col-9">
                                                    {{data.toWard.district.province.name}}
                                                </div>
                                            </div>
                                            <div style="display: flex" class="ui-grid-row">
                                                <div class="ui-grid-col-3">
                                                    Trạm giao
                                                </div>
                                                <div *ngIf="data.toHub" class="ui-grid-col-9">
                                                    {{data.toHub.name}}
                                                </div>
                                            </div>
                                            <div style="display: flex" class="ui-grid-row">
                                                <div class="ui-grid-col-3">
                                                    Tuyến giao
                                                </div>
                                                <div *ngIf="data.toHubRouting" class="ui-grid-col-9">
                                                    {{data.toHubRouting.name}}
                                                </div>
                                            </div>
                                        </div>
                                    </ng-template>
                                </p-column>

                            </p-dataTable> -->
                            <p-table [value]="datasource" [responsive]="true" [paginator]="true" [rows]="rowPerPage" [rowsPerPageOptions]="[10,20,50,100]"
                                [alwaysShowPaginator]="true" (onPage)="onPageChange($event)" [(selection)]="selectedData" [lazy]="true"
                                [totalRecords]="totalRecords" (onLazyLoad)="loadLazy($event)" [(first)]="first">
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th style="width:2.2em">
                                            <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                                        </th>
                                        <th class="ui-column-title" style="font-weight: bold;">
                                            Thông tin yêu cầu
                                        </th>
                                        <th class="ui-column-title" style="font-weight: bold;">
                                            Thông tin người gửi
                                        </th>
                                        <th class="ui-column-title" style="font-weight: bold;">
                                            Thông tin người nhận
                                        </th>
                                        <th class="ui-column-title" style="font-weight: bold;">
                                            Thông tin giá cước
                                        </th>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-data let-columns="columns">
                                    <tr [pSelectableRow]="data">
                                        <td style="width:2.2em">
                                            <p-tableCheckbox [value]="data"></p-tableCheckbox>
                                        </td>
                                        <td>
                                            <div class="ui-grid-table ui-grid-responsive ui-grid-pad request">
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-5">
                                                        Mã yêu cầu
                                                    </div>
                                                    <div class="ui-grid-col-7">
                                                        {{data.shipmentNumber}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-5">
                                                        Ngày gửi
                                                    </div>
                                                    <div class="ui-grid-col-7">
                                                        {{data.orderDate | dateFormat}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-5">
                                                        HTTT
                                                    </div>
                                                    <div class="ui-grid-col-7">
                                                        {{data.paymentType?.name}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-5">
                                                        Dịch vụ
                                                    </div>
                                                    <div class="ui-grid-col-7">
                                                        {{data.service ? data.service.name :""}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-5">
                                                        Dịch vụ gia tăng
                                                    </div>
                                                    <div class="ui-grid-col-7">
                                                        {{data.shipmentServiceDVGTs}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-5">
                                                        Trạng thái
                                                    </div>
                                                    <div class="ui-grid-col-7">
                                                        {{data.shipmentStatus ? data.shipmentStatus.name : ""}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-5">
                                                        Nhân viên gửi
                                                    </div>
                                                    <div class="ui-grid-col-7">
                                                        {{data.deliverUser ? data.deliverUser.fullName : ""}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-5">
                                                        Người nhận thực tế
                                                    </div>
                                                    <div class="ui-grid-col-7">
                                                        {{data.realRecipientName}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-5">
                                                        TG giao hàng
                                                    </div>
                                                    <div class="ui-grid-col-7">
                                                        {{data.endDeliveryTime}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-5">
                                                        Tùy chọn
                                                    </div>
                                                    <div class="ui-grid-col-7">
                                                        <div style="display: flex; justify-content: space-between">
                                                            <a #detailShipmentTemplate class="btn btn-success" [(ngModel)]="data.shipmentNumber" (click)="onDetailShipment(detailShipmentTemplate, data)"
                                                                *ngIf="data.shipmentStatusId" ngDefaultControl>
                                                                <i class="fa fa-eye"></i>Xem</a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-5">
                                                        &nbsp;
                                                    </div>
                                                    <div class="ui-grid-col-7">
                                                        &nbsp;
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="ui-grid-table ui-grid-responsive ui-grid-pad request">
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-3">
                                                        Tên
                                                    </div>
                                                    <div class="ui-grid-col-9">
                                                        {{data.senderName}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-3">
                                                        Điện thoại
                                                    </div>
                                                    <div class="ui-grid-col-9">
                                                        <i class="fa fa-phone"></i>
                                                        {{data.senderPhone}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-3">
                                                        CTY
                                                    </div>
                                                    <div class="ui-grid-col-9">
                                                        <i class="fa fa-home"></i>
                                                        {{data.companyFrom}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-3">
                                                        Địa chỉ
                                                    </div>
                                                    <div class="ui-grid-col-9">
                                                        <i class="fa fa-map-marker"></i>
                                                        {{data.pickingAddress}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-3">
                                                        Tỉnh đi
                                                    </div>
                                                    <div class="ui-grid-col-9">
                                                        {{data.fromWard ? data.fromWard?.district?.province?.name : ""}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-3">
                                                        Trạm lấy
                                                    </div>
                                                    <div class="ui-grid-col-9">
                                                        {{data.fromHub ? data.fromHub.name : ""}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-3">
                                                        Tuyến lấy
                                                    </div>
                                                    <div class="ui-grid-col-9">
                                                        {{data.fromHubRouting? data.fromHubRouting.name : ""}}
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="ui-grid-table ui-grid-responsive ui-grid-pad request">
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-3">
                                                        Tên
                                                    </div>
                                                    <div class="ui-grid-col-9">
                                                        {{data.receiverName}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-3">
                                                        Điện thoại
                                                    </div>
                                                    <div class="ui-grid-col-9">
                                                        <i class="fa fa-phone"></i>
                                                        {{data.receiverPhone}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-3">
                                                        CTY
                                                    </div>
                                                    <div class="ui-grid-col-9">
                                                        <i class="fa fa-home"></i>
                                                        {{data.companyTo}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-3">
                                                        Địa chỉ
                                                    </div>
                                                    <div class="ui-grid-col-9">
                                                        <i class="fa fa-map-marker"></i>
                                                        {{data.shippingAddress}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-3">
                                                        Tỉnh đến
                                                    </div>
                                                    <div class="ui-grid-col-9">
                                                        {{data.toWard ? data.toWard?.district?.province?.name : ""}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-3">
                                                        Trạm giao
                                                    </div>
                                                    <div class="ui-grid-col-9">
                                                        {{data.toHub ? data.toHub.name : ""}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-3">
                                                        Tuyến giao
                                                    </div>
                                                    <div class="ui-grid-col-9">
                                                        {{data.toHubRouting ? data.toHubRouting.name : ""}}
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="ui-grid-table ui-grid-responsive ui-grid-pad request">
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-5">
                                                        Cước chính
                                                    </div>
                                                    <div class="ui-grid-col-7">
                                                        {{data.defaultPrice}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-5">
                                                        PPXD
                                                    </div>
                                                    <div class="ui-grid-col-7">
                                                        {{data.fuelPrice}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-5">
                                                        VSVX
                                                    </div>
                                                    <div class="ui-grid-col-7">
                                                        {{data.remoteAreasPrice}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-5">
                                                        Phí DVGT
                                                    </div>
                                                    <div class="ui-grid-col-7">
                                                        {{data.totalDVGT}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-5">
                                                        VAT
                                                    </div>
                                                    <div class="ui-grid-col-7">
                                                        {{data.vatPrice}}
                                                    </div>
                                                </div>
                                                <div style="display: flex" class="ui-grid-row">
                                                    <div class="ui-grid-col-5">
                                                        Tổng cước
                                                    </div>
                                                    <div class="ui-grid-col-7">
                                                        {{data.totalPrice}}
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="summary">
                                    <span class="ui-column-title" style="font-weight: bold;">Tổng: {{totalRecords}} vận đơn</span>
                                </ng-template>
                            </p-table>
                        </div>
                    </div>
                </div>

                <div class="row" [hidden]="isGribTable">
                    <div class="col-sm-12">
                        <p-table #dt [value]="datasource" [responsive]="true" [paginator]="true" [rows]="rowPerPage" [rowsPerPageOptions]="[10,20,50,100]"
                            (onPage)="onPageChange($event)" [lazy]="true" [totalRecords]="totalRecords" (onLazyLoad)="loadLazy($event)"
                            [(selection)]="selectedData" scrollable="true" sortField="id" sortOrder="-1"
                            [columns]="columns">
                            <ng-template pTemplate="header" let-columns>
                                <tr>
                                    <th style="width: 28px">
                                        <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                                    </th>
                                    <th style="width: 100px">Thao tác
                                    </th>
                                    <th [pSortableColumn]="'id'" Class="p-col-numPick">ID
                                        <p-sortIcon [field]="'id'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'shipmentNumber'" Class="p-col-normal" style="width: 220px">Mã vận đơn
                                        <p-sortIcon [field]="'shipmentNumber'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'requestShipmentId'" Class="p-col-normal">Mã bill tổng
                                        <p-sortIcon [field]="'requestShipmentId'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'cusNote'" Class="p-col-normal">Yêu cầu phục vụ
                                        <p-sortIcon [field]="'cusNote'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'orderDate'" Class="p-col-date">Ngày gửi
                                        <p-sortIcon [field]="'orderDate'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'paymentType.name'" Class="p-col-normal">HTTT
                                        <p-sortIcon [field]="'paymentType.name'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'service.name'" Class="p-col-normal">Dịch vụ
                                        <p-sortIcon [field]="'service.name'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'shipmentServiceDVGTs'" Class="p-col-normal">Dịch vụ gia tăng
                                        <p-sortIcon [field]="'shipmentServiceDVGTs'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'defaultPrice'" Class="p-col-normal">Cước chính
                                        <p-sortIcon [field]="'defaultPrice'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'fuelPrice'" Class="p-col-normal">PPXD
                                        <p-sortIcon [field]="'fuelPrice'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'remoteAreasPrice'" Class="p-col-normal">VSVX
                                        <p-sortIcon [field]="'remoteAreasPrice'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'totalDVGT'" Class="p-col-normal">Phí DVGT
                                        <p-sortIcon [field]="'totalDVGT'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'vatPrice'" Class="p-col-normal">VAT
                                        <p-sortIcon [field]="'vatPrice'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'totalPrice'" Class="p-col-normal">Tổng cước
                                        <p-sortIcon [field]="'totalPrice'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'shipmentStatus.name'" Class="p-col-orderdate">Trạng thái
                                        <p-sortIcon [field]="'shipmentStatus.name'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'deliverUser.fullName'" Class="p-col-normal">Nhân viên gửi
                                        <p-sortIcon [field]="'deliverUser.fullName'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'senderName'" Class="p-col-address">Tên người gửi
                                        <p-sortIcon [field]="'senderName'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'senderPhone'" Class="p-col-normal">Đt gửi
                                        <p-sortIcon [field]="'senderPhone'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'companyFrom'" Class="p-col-normal">CTY gửi
                                        <p-sortIcon [field]="'companyFrom'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'pickingAddress'" Class="p-col-max">Địa chỉ gửi
                                        <p-sortIcon [field]="'pickingAddress'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'fromWard.district.province.name'" Class="p-col-normal">Tỉnh đi
                                        <p-sortIcon [field]="'fromWard.district.province.name'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'fromHub.name'" Class="p-col-normal">Trạm lấy
                                        <p-sortIcon [field]="'fromHub.name'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'fromHubRouting.name'" Class="p-col-orderdate">Tuyến lấy
                                        <p-sortIcon [field]="'fromHubRouting.name'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'receiverName'" Class="p-col-address">Tên người nhận
                                        <p-sortIcon [field]="'receiverName'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'receiverPhone'" Class="p-col-normal">Đt nhận
                                        <p-sortIcon [field]="'receiverPhone'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'companyTo'" Class="p-col-normal">CTY nhận
                                        <p-sortIcon [field]="'companyTo'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'shippingAddress'" Class="p-col-max">Địa chỉ nhận
                                        <p-sortIcon [field]="'shippingAddress'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'realRecipientName'" Class="p-col-normal">Tên người nhận thực tế
                                        <p-sortIcon [field]="'realRecipientName'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'endDeliveryTime'" Class="p-col-normal">TG giao hàng
                                        <p-sortIcon [field]="'endDeliveryTime'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'toWard.district.province.name'" Class="p-col-normal">Tỉnh đến
                                        <p-sortIcon [field]="'toWard.district.province.name'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'toHub.name'" Class="p-col-normal">Trạm giao
                                        <p-sortIcon [field]="'toHub.name'"></p-sortIcon>
                                    </th>
                                    <th [pSortableColumn]="'toHubRouting.name'" Class="p-col-orderdate">Tuyến giao
                                        <p-sortIcon [field]="'toHubRouting.name'"></p-sortIcon>
                                    </th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-data let-columns="columns">
                                <tr [pSelectableRow]="data">
                                    <td style="width: 2.25em">
                                        <p-tableCheckbox [value]="data"></p-tableCheckbox>
                                    </td>
                                    <td style="width: 100px">
                                        <div style="display: flex;">
                                            <button class="btn btn-success" [(ngModel)]="data.shipmentNumber" (click)="onDetailShipment(detailShipmentTemplate, data)"
                                                *ngIf="data.shipmentStatusId" ngDefaultControl>
                                                <i class="fa fa-eye"></i> Xem
                                            </button>
                                        </div>
                                    </td>
                                    <td class="p-col-numPick">
                                        {{data.id}}
                                    </td>
                                    <td class="p-col-normal" style="width: 220px">
                                        {{data.shipmentNumber}}
                                    </td>
                                    <td class="p-col-normal">
                                        {{data.requestShipmentId}}
                                    </td>
                                    <td class="p-col-normal">
                                        {{data.cusNote}}
                                    </td>
                                    <td class="p-col-date">
                                        {{data.orderDate | dateFormat}}
                                    </td>
                                    <td class="p-col-normal">
                                        {{data.paymentType?.name}}
                                    </td>
                                    <td class="p-col-normal">
                                        {{data.service ? data.service.name : ""}}
                                    </td>
                                    <td class="p-col-normal">

                                    </td>
                                    <td class="p-col-normal">
                                        {{data.defaultPrice}}
                                    </td>
                                    <td class="p-col-normal">
                                        {{data.fuelPrice}}
                                    </td>
                                    <td class="p-col-normal">
                                        {{data.remoteAreasPrice}}
                                    </td>
                                    <td class="p-col-normal">
                                        {{data.totalDVGT}}
                                    </td>
                                    <td class="p-col-normal">
                                        {{data.vatPrice}}
                                    </td>
                                    <td class="p-col-normal">
                                        {{data.totalPrice}}
                                    </td>
                                    <td class="p-col-orderdate">
                                        {{data.shipmentStatus ? data.shipmentStatus.name : ""}}
                                    </td>
                                    <td class="p-col-normal">
                                        {{data.deliverUser ? data.deliverUser.fullName : ""}}
                                    </td>
                                    <td class="p-col-address">
                                        {{data.senderName}}
                                    </td>
                                    <td class="p-col-normal">
                                        {{data.senderPhone}}
                                    </td>
                                    <td class="p-col-normal">
                                        {{data.companyFrom}}
                                    </td>
                                    <td class="p-col-max">
                                        {{data.pickingAddress}}
                                    </td>
                                    <td class="p-col-normal">
                                        {{data.fromWard && data.fromWard.district && data.fromWard.district.province ? data.fromWard?.district?.province?.name : ""}}
                                    </td>
                                    <td class="p-col-normal">
                                        {{data.fromHub ? data.fromHub.name : ""}}
                                    </td>
                                    <td class="p-col-orderdate">
                                        {{data.fromHubRouting ? data.fromHubRouting.name : ""}}
                                    </td>
                                    <td class="p-col-address">
                                        {{data.receiverName}}
                                    </td>
                                    <td class="p-col-normal">
                                        {{data.receiverPhone}}
                                    </td>
                                    <td class="p-col-normal">
                                        {{data.companyTo}}
                                    </td>
                                    <td class="p-col-max">
                                        {{data.shippingAddress}}
                                    </td>
                                    <td class="p-col-normal">
                                        {{data.realRecipientName}}
                                    </td>
                                    <td class="p-col-normal">
                                        {{data.endDeliveryTime | dateFormat}}
                                    </td>
                                    <td class="p-col-normal">
                                        {{data.toWard && data.toWard.district && data.toWard.district.province ? data.toWard?.district?.province?.name : ""}}
                                    </td>
                                    <td class="p-col-normal">
                                        {{data.toHub ? data.toHub.name : ""}}
                                    </td>
                                    <td class="p-col-orderdate">
                                        {{data.toHubRouting ? data.toHubRouting.name : ""}}
                                    </td>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="summary">
                                <span class="ui-column-title" style="font-weight: bold;">Tổng: {{totalRecords}} vận đơn</span>
                            </ng-template>
                        </p-table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- print -->
<div id="form-print" [hidden]="true">
    <div *ngIf="idPrint === 'print-create-multi-shipment'">
        <form-create-shipment></form-create-shipment>
    </div>
    <div *ngIf="idPrint === 'print-code-a4-detail-shipment'">
        <form-print-code-a4-detail-shipment></form-print-code-a4-detail-shipment>
    </div>
    <div *ngIf="idPrint === 'print-code-sticker-detail-shipment'">
        <form-print-code-sticker-detail-shipment></form-print-code-sticker-detail-shipment>
    </div>
</div>
<iframe class="hidden-iframe" name="print-create-multi-shipment"></iframe>
<iframe class="hidden-iframe" name="print-code-a4-detail-shipment"></iframe>
<iframe class="hidden-iframe" name="print-code-sticker-detail-shipment"></iframe>